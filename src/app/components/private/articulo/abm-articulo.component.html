<app-navbar></app-navbar>

<h2>Agregar-Modificar-Eliminar articulo</h2>
<hr>
<div style="margin-left: auto; margin-right: auto;">
    <div class="col-lg-8 align-content-center" style="width: 100%; margin: 0 auto;">
        <div class="card">
            <div class="card-header"><strong>Complete el formulario</strong> </div>
            <div class="card-body">
                <form (ngSubmit)="agregarArticuloNuevo(form.value); form.reset()" #form="ngForm" novalidate="" class="form-horizontal">

                    <div *ngIf="visible" class="form-group row">
                        <label class="col-md-2 col-xl-2 col-form-label">ID</label>
                        <div class="col-md-9">
                            <input readonly="readonly" type="text" class="form-control" id="id" placeholder="Id" name="id" [(ngModel)]="articuloId" #id="ngModel">
                        </div>
                    </div>

                    <div class="form-group row">
                        <label class="col-md-2 col-xl-2 col-form-label">Nombre</label>
                        <div class="col-md-9 col-xl-9">
                            <input type="text" class="form-control" id="nombre" placeholder="Nombre" name="nombre" [(ngModel)]="nombreArt" required #nombre="ngModel">
                        </div>
                        <div *ngIf="nombre.invalid && nombre.touched" class="alert alert-danger">
                            Dato requerido
                        </div>
                    </div>

                    <div class="form-group row">
                        <label class="col-md-2 col-form-label">Descripción</label>
                        <div class="col-md-9">
                            <textarea type="text" class="form-control" id="descripcion" placeholder="Descripcion" name="descripcion" [(ngModel)]="descripcionArt" #descripcion="ngModel"></textarea>
                        </div>
                    </div>

                    <div class="form-group row">
                        <label class="col-md-2 col-form-label">Precio</label>
                        <div class="controls col-md-9">
                            <div class="input-prepend input-group">
                                <div class="input-group-prepend"><span class="input-group-text">$</span></div>
                                <input type="text" class="form-control" id="precio" placeholder="Precio" name="precio" [(ngModel)]="precioArt" required #precio="ngModel">
                                <div class="input-group-append"><span class="input-group-text">.00</span></div>
                            </div>
                            <div *ngIf="precio.invalid && precio.touched" class="alert alert-danger">
                                Dato requerido
                            </div>
                        </div>
                    </div>

                    <div class="form-group custom-checkbox row">
                        <label class="col-md-2 col-form-label">Activo</label>
                        <div class="col-md-9" style="margin-left: 25px; margin-top: 7px;">
                            <input name="activo" [(ngModel)]="activoArt" #activo="ngModel" type="checkbox" class="custom-control-input" id="customCheck2">
                            <label class="custom-control-label" for="customCheck2">Activo</label>
                        </div>
                    </div>

                    <div class="form-group custom-checkbox row">
                        <label class="col-md-2 col-form-label">Destacado</label>
                        <div class="col-md-9" style="margin-left: 25px; margin-top: 7px;">
                            <input name="destacado" [(ngModel)]="destacadoArt" #destacado="ngModel" type="checkbox" class="custom-control-input" id="customCheck3">
                            <label class="custom-control-label" for="customCheck3">Destacado</label>
                        </div>
                    </div>

                    <div class="form-group custom-checkbox row">
                        <label class="col-md-2 col-form-label">En Oferta</label>
                        <div class="col-md-9" style="margin-left: 25px; margin-top: 7px;">
                            <input name="enOferta" [(ngModel)]="enOfertaArt" #enOferta="ngModel" type="checkbox" class="custom-control-input" id="customCheck1">
                            <label class="custom-control-label" for="customCheck1">En Oferta</label>
                        </div>
                    </div>

                    <div class="form-group row">
                        <label class="col-md-2 col-form-label">Descuento</label>
                        <div class="controls col-md-9">
                            <div class="input-prepend input-group">
                                <div class="input-group-prepend"><span class="input-group-text">$</span></div>
                                <input type="text" class="form-control" id="descuento" placeholder="Descuento" name="descuento" [(ngModel)]="descuentoArt" #descuento="ngModel">
                                <div class="input-group-append"><span class="input-group-text">.00</span></div>
                            </div>
                            <div *ngIf="descuento.invalid && descuento.touched" class="alert alert-danger">
                                Dato requerido
                            </div>
                        </div>
                    </div>
                    <div class="form-group row">
                        <label class="col-md-2 col-form-label">Marca</label>
                        <div class="col-md-9">
                            <input type="text" class="form-control" id="marca" placeholder="Marca" name="marca" [(ngModel)]="marcaArt" #marca="ngModel">
                        </div>
                    </div>
                    <div class="form-group row">
                        <label class="col-md-2 col-form-label">Peso (Kg)</label>
                        <div class="col-md-9">
                            <input type="text" class="form-control" id="peso" placeholder="Peso" name="peso" [(ngModel)]="pesoArt" #peso="ngModel">
                        </div>
                    </div>
                    <div class="form-group row">
                        <label class="col-md-2 col-form-label">Categoria *</label>
                        <select style="margin-left: 15px;" class="custom-select col-md-8" (change)="selectFiltro($event.target.value)" [(ngModel)]="filtroCategoria">
                            <option value="undefined" selected >Elige una categoría</option>
                            <option [value]="categoria.id" *ngFor="let categoria of listaCategorias;">{{categoria.nombre}}</option>
                        </select>
                    </div>
                    <div class="form-group row">
                        <label class="col-md-2 col-form-label">Imagenes (Maximo 5)</label>
                        <div class="col-md-9" style="margin-top: 15px;">
                            <input (change)="createFormData($event)" multiple name="file" type="file" class="form-control-file" id="exampleFormControlFile1">
                        </div>
                    </div>
                    <div class="col-lg-12" style="display: flex;justify-content: center;align-items: center;">
                        <div style="width: 120px;">
                            <button class="btn btn-primary btn-dark" type="submit" [disabled]=" !form.form.valid ">Guardar</button>
                        </div>
                    </div>
                    <button type="button" (click)=modificarArticulo(form.value) class="btn btn-dark btn-sm ">Modificar</button>
                </form>
            </div>
        </div>
    </div>
</div>

<button type="button" (click)=getArticuloAModificar(7) class="btn btn-dark btn-sm ">Edit</button>

<div *ngFor="let dato of imagenes" class="card" style="width: 20rem;">
    <img [src]="'http://localhost:3006/getImagenProducto/' + dato.url" width="100%">
    <button type="button" class="btn btn-dark btn-sm" (click)="borrarImagen(dato.id, dato.url)">Borrar img</button>
</div>